var er=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vr(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var ut=Object.getOwnPropertySymbols,pr=Object.prototype.hasOwnProperty,mr=Object.prototype.propertyIsEnumerable;function dr(d){if(d==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(d)}function yr(){try{if(!Object.assign)return!1;var d=new String("abc");if(d[5]="de",Object.getOwnPropertyNames(d)[0]==="5")return!1;for(var n={},o=0;o<10;o++)n["_"+String.fromCharCode(o)]=o;var r=Object.getOwnPropertyNames(n).map(function(h){return n[h]});if(r.join("")!=="0123456789")return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(h){a[h]=h}),Object.keys(Object.assign({},a)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var K=yr()?Object.assign:function(d,n){for(var o,r=dr(d),a,h=1;h<arguments.length;h++){o=Object(arguments[h]);for(var S in o)pr.call(o,S)&&(r[S]=o[S]);if(ut){a=ut(o);for(var y=0;y<a.length;y++)mr.call(o,a[y])&&(r[a[y]]=o[a[y]])}}return r},pe={exports:{}},me,ct;function st(){return ct||(ct=1,me=function(d,n,o){n.forEach(function(r){var a=o[r];d.prototype[r]=function(h){return h.ros=this,new a(h)}})}),me}var de,ft;function tr(){return ft||(ft=1,de=typeof window<"u"?window.WebSocket:WebSocket),de}var ye,lt;function gr(){if(lt)return ye;lt=1;var d=arguments[3],n=arguments[4],o=arguments[5],r=JSON.stringify;return ye=function(a,h){for(var S,y=Object.keys(o),m=0,v=y.length;m<v;m++){var i=y[m],s=o[i].exports;if(s===a||s&&s.default===a){S=i;break}}if(!S){S=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var f={},m=0,v=y.length;m<v;m++){var i=y[m];f[i]=i}n[S]=["function(require,module,exports){"+a+"(self); }",f]}var c=Math.floor(Math.pow(16,8)*Math.random()).toString(16),T={};T[S]=S,n[c]=["function(require,module,exports){var f = require("+r(S)+");(f.default ? f.default : f)(self);}",T];var O={};A(c);function A(I){O[I]=!0;for(var Q in n[I][1]){var Y=n[I][1][Q];O[Y]||A(Y)}}var k="("+d+")({"+Object.keys(O).map(function(I){return r(I)+":["+n[I][0]+","+r(n[I][1])+"]"}).join(",")+"},{},["+r(c)+"])",M=window.URL||window.webkitURL||window.mozURL||window.msURL,U=new Blob([k],{type:"text/javascript"});if(h&&h.bare)return U;var N=M.createObjectURL(U),G=new Worker(N);return G.objectURL=N,G},ye}var ge={exports:{}},ht;function wr(){return ht||(ht=1,function(d){function n(v){var i={};function s(c){if(i[c])return i[c].exports;var T=i[c]={i:c,l:!1,exports:{}};return v[c].call(T.exports,T,T.exports,s),T.l=!0,T.exports}s.m=v,s.c=i,s.i=function(c){return c},s.d=function(c,T,O){s.o(c,T)||Object.defineProperty(c,T,{configurable:!1,enumerable:!0,get:O})},s.r=function(c){Object.defineProperty(c,"__esModule",{value:!0})},s.n=function(c){var T=c&&c.__esModule?function(){return c.default}:function(){return c};return s.d(T,"a",T),T},s.o=function(c,T){return Object.prototype.hasOwnProperty.call(c,T)},s.p="/",s.oe=function(c){throw console.error(c),c};var f=s(s.s=ENTRY_MODULE);return f.default||f}var o="[\\.|\\-|\\+|\\w|/|@]+",r="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+o+").*?\\)";function a(v){return(v+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function h(v){return!isNaN(1*v)}function S(v,i,s){var f={};f[s]=[];var c=i.toString(),T=c.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!T)return f;for(var O=T[1],A=new RegExp("(\\\\n|\\W)"+a(O)+r,"g"),k;k=A.exec(c);)k[3]!=="dll-reference"&&f[s].push(k[3]);for(A=new RegExp("\\("+a(O)+'\\("(dll-reference\\s('+o+'))"\\)\\)'+r,"g");k=A.exec(c);)v[k[2]]||(f[s].push(k[1]),v[k[2]]=__webpack_require__(k[1]).m),f[k[2]]=f[k[2]]||[],f[k[2]].push(k[4]);for(var M=Object.keys(f),U=0;U<M.length;U++)for(var N=0;N<f[M[U]].length;N++)h(f[M[U]][N])&&(f[M[U]][N]=1*f[M[U]][N]);return f}function y(v){var i=Object.keys(v);return i.reduce(function(s,f){return s||v[f].length>0},!1)}function m(v,i){for(var s={main:[i]},f={main:[]},c={main:{}};y(s);)for(var T=Object.keys(s),O=0;O<T.length;O++){var A=T[O],k=s[A],M=k.pop();if(c[A]=c[A]||{},!(c[A][M]||!v[A][M])){c[A][M]=!0,f[A]=f[A]||[],f[A].push(M);for(var U=S(v,v[A][M],A),N=Object.keys(U),G=0;G<N.length;G++)s[N[G]]=s[N[G]]||[],s[N[G]]=s[N[G]].concat(U[N[G]])}}return f}d.exports=function(v,i){i=i||{};var s={main:__webpack_modules__},f=i.all?{main:Object.keys(s.main)}:m(s,v),c="";Object.keys(f).filter(function(M){return M!=="main"}).forEach(function(M){for(var U=0;f[M][U];)U++;f[M].push(U),s[M][U]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",c=c+"var "+M+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(U))+")({"+f[M].map(function(N){return""+JSON.stringify(N)+": "+s[M][N].toString()}).join(",")+`});
`}),c=c+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(v))+")({"+f.main.map(function(M){return""+JSON.stringify(M)+": "+s.main[M].toString()}).join(",")+"}))(self);";var T=new window.Blob([c],{type:"text/javascript"});if(i.bare)return T;var O=window.URL||window.webkitURL||window.mozURL||window.msURL,A=O.createObjectURL(T),k=new window.Worker(A);return k.objectURL=A,k}}(ge)),ge.exports}var we,vt;function _r(){if(vt)return we;vt=1;var d=d||tr();return we=function(n){var o=null;function r(h){var S=h.data;S instanceof ArrayBuffer?n.postMessage(S,[S]):n.postMessage(S)}function a(h){n.postMessage({type:h.type})}n.addEventListener("message",function(h){var S=h.data;if(typeof S=="string")o.send(S);else if(S.hasOwnProperty("close"))o.close(),o=null;else if(S.hasOwnProperty("uri")){var y=S.uri;o=new d(y),o.binaryType="arraybuffer",o.onmessage=r,o.onclose=a,o.onopen=a,o.onerror=a}else throw"Unknown message to WorkerSocket"})},we}var _e,pt;function br(){if(pt)return _e;pt=1;try{var d=gr()}catch{var d=wr()}var n=_r();function o(r){this.socket_=d(n),this.socket_.addEventListener("message",this.handleWorkerMessage_.bind(this)),this.socket_.postMessage({uri:r})}return o.prototype.handleWorkerMessage_=function(r){var a=r.data;if(a instanceof ArrayBuffer||typeof a=="string")this.onmessage(r);else{var h=a.type;if(h==="close")this.onclose(null);else if(h==="open")this.onopen(null);else if(h==="error")this.onerror(null);else throw"Unknown message from workersocket"}},o.prototype.send=function(r){this.socket_.postMessage(r)},o.prototype.close=function(){this.socket_.postMessage({close:!0})},_e=o,_e}var be,mt;function xr(){return mt||(mt=1,be=function(){return document.createElement("canvas")}),be}var xe,dt;function Tr(){if(dt)return xe;dt=1;var d=xr(),n=d.Image||window.Image;function o(r,a){var h=new n;h.onload=function(){var S=new d,y=S.getContext("2d");S.width=h.width,S.height=h.height,y.imageSmoothingEnabled=!1,y.webkitImageSmoothingEnabled=!1,y.mozImageSmoothingEnabled=!1,y.drawImage(h,0,0);for(var m=y.getImageData(0,0,h.width,h.height).data,v="",i=0;i<m.length;i+=4)v+=String.fromCharCode(m[i],m[i+1],m[i+2]);a(JSON.parse(v))},h.src="data:image/png;base64,"+r}return xe=o,xe}var Te={exports:{}},yt;function Sr(){return yt||(yt=1,function(d){(function(n,o){var r=Math.pow(2,-24),a=Math.pow(2,32),h=Math.pow(2,53);function S(v){var i=new ArrayBuffer(256),s=new DataView(i),f,c=0;function T(L){for(var q=i.byteLength,E=c+L;q<E;)q*=2;if(q!==i.byteLength){var C=s;i=new ArrayBuffer(q),s=new DataView(i);for(var R=c+3>>2,P=0;P<R;++P)s.setUint32(P*4,C.getUint32(P*4))}return f=L,s}function O(){c+=f}function A(L){O(T(8).setFloat64(c,L))}function k(L){O(T(1).setUint8(c,L))}function M(L){for(var q=T(L.length),E=0;E<L.length;++E)q.setUint8(c+E,L[E]);O()}function U(L){O(T(2).setUint16(c,L))}function N(L){O(T(4).setUint32(c,L))}function G(L){var q=L%a,E=(L-q)/a,C=T(8);C.setUint32(c,E),C.setUint32(c+4,q),O()}function I(L,q){q<24?k(L<<5|q):q<256?(k(L<<5|24),k(q)):q<65536?(k(L<<5|25),U(q)):q<4294967296?(k(L<<5|26),N(q)):(k(L<<5|27),G(q))}function Q(L){var q;if(L===!1)return k(244);if(L===!0)return k(245);if(L===null)return k(246);if(L===o)return k(247);switch(typeof L){case"number":if(Math.floor(L)===L){if(0<=L&&L<=h)return I(0,L);if(-h<=L&&L<0)return I(1,-(L+1))}return k(251),A(L);case"string":var E=[];for(q=0;q<L.length;++q){var C=L.charCodeAt(q);C<128?E.push(C):C<2048?(E.push(192|C>>6),E.push(128|C&63)):C<55296?(E.push(224|C>>12),E.push(128|C>>6&63),E.push(128|C&63)):(C=(C&1023)<<10,C|=L.charCodeAt(++q)&1023,C+=65536,E.push(240|C>>18),E.push(128|C>>12&63),E.push(128|C>>6&63),E.push(128|C&63))}return I(3,E.length),M(E);default:var R;if(Array.isArray(L))for(R=L.length,I(4,R),q=0;q<R;++q)Q(L[q]);else if(L instanceof Uint8Array)I(2,L.length),M(L);else{var P=Object.keys(L);for(R=P.length,I(5,R),q=0;q<R;++q){var j=P[q];Q(j),Q(L[j])}}}}if(Q(v),"slice"in i)return i.slice(0,c);for(var Y=new ArrayBuffer(c),z=new DataView(Y),H=0;H<c;++H)z.setUint8(H,s.getUint8(H));return Y}function y(v,i,s){var f=new DataView(v),c=0;typeof i!="function"&&(i=function(E){return E}),typeof s!="function"&&(s=function(){return o});function T(E,C){return c+=C,E}function O(E){return T(new Uint8Array(v,c,E),E)}function A(){var E=new ArrayBuffer(4),C=new DataView(E),R=N(),P=R&32768,j=R&31744,e=R&1023;if(j===31744)j=261120;else if(j!==0)j+=127-15<<10;else if(e!==0)return e*r;return C.setUint32(0,P<<16|j<<13|e<<13),C.getFloat32(0)}function k(){return T(f.getFloat32(c),4)}function M(){return T(f.getFloat64(c),8)}function U(){return T(f.getUint8(c),1)}function N(){return T(f.getUint16(c),2)}function G(){return T(f.getUint32(c),4)}function I(){return G()*a+G()}function Q(){return f.getUint8(c)!==255?!1:(c+=1,!0)}function Y(E){if(E<24)return E;if(E===24)return U();if(E===25)return N();if(E===26)return G();if(E===27)return I();if(E===31)return-1;throw"Invalid length encoding"}function z(E){var C=U();if(C===255)return-1;var R=Y(C&31);if(R<0||C>>5!==E)throw"Invalid indefinite length element";return R}function H(E,C){for(var R=0;R<C;++R){var P=U();P&128&&(P<224?(P=(P&31)<<6|U()&63,C-=1):P<240?(P=(P&15)<<12|(U()&63)<<6|U()&63,C-=2):(P=(P&15)<<18|(U()&63)<<12|(U()&63)<<6|U()&63,C-=3)),P<65536?E.push(P):(P-=65536,E.push(55296|P>>10),E.push(56320|P&1023))}}function L(){var E=U(),C=E>>5,R=E&31,P,j;if(C===7)switch(R){case 25:return A();case 26:return k();case 27:return M()}if(j=Y(R),j<0&&(C<2||6<C))throw"Invalid length";switch(C){case 0:return j;case 1:return-1-j;case 2:if(j<0){for(var e=[],t=0;(j=z(C))>=0;)t+=j,e.push(O(j));var u=new Uint8Array(t),l=0;for(P=0;P<e.length;++P)u.set(e[P],l),l+=e[P].length;return u}return O(j);case 3:var p=[];if(j<0)for(;(j=z(C))>=0;)H(p,j);else H(p,j);return String.fromCharCode.apply(null,p);case 4:var g;if(j<0)for(g=[];!Q();)g.push(L());else for(g=new Array(j),P=0;P<j;++P)g[P]=L();return g;case 5:var w={};for(P=0;P<j||j<0&&!Q();++P){var x=L();w[x]=L()}return w;case 6:return i(L(),j);case 7:switch(j){case 20:return!1;case 21:return!0;case 22:return null;case 23:return o;default:return s(j)}}}var q=L();if(c!==v.byteLength)throw"Remaining bytes";return q}var m={encode:S,decode:y};typeof o=="function"&&o.amd?o("cbor/cbor",m):d.exports?d.exports=m:n.CBOR||(n.CBOR=m)})(er)}(Te)),Te.exports}var Se={exports:{}},gt;function Rr(){return gt||(gt=1,function(d){var n=Math.pow(2,32),o=!1;function r(){o||(o=!0,console.warn("CBOR 64-bit integer array values may lose precision. No further warnings."))}function a(i){r();for(var s=i.byteLength,f=i.byteOffset,c=s/8,T=i.buffer.slice(f,f+s),O=new Uint32Array(T),A=new Array(c),k=0;k<c;k++){var M=k*2,U=O[M],N=O[M+1];A[k]=U+n*N}return A}function h(i){r();for(var s=i.byteLength,f=i.byteOffset,c=s/8,T=i.buffer.slice(f,f+s),O=new Uint32Array(T),A=new Int32Array(T),k=new Array(c),M=0;M<c;M++){var U=M*2,N=O[U],G=A[U+1];k[M]=N+n*G}return k}function S(i,s){var f=i.byteLength,c=i.byteOffset,T=i.buffer.slice(c,c+f);return new s(T)}var y={64:Uint8Array,69:Uint16Array,70:Uint32Array,72:Int8Array,77:Int16Array,78:Int32Array,85:Float32Array,86:Float64Array},m={71:a,79:h};function v(i,s){if(s in y){var f=y[s];return S(i,f)}return s in m?m[s](i):i}d.exports&&(d.exports=v)}(Se)),Se.exports}var Re,wt;function kr(){if(wt)return Re;wt=1;var d=Tr(),n=Sr(),o=Rr(),r=null;typeof bson<"u"&&(r=bson().BSON);function a(h){var S=null;h.transportOptions.decoder&&(S=h.transportOptions.decoder);function y(i){i.op==="publish"?h.emit(i.topic,i.msg):i.op==="service_response"?h.emit(i.id,i):i.op==="call_service"?h.emit(i.service,i):i.op==="status"&&(i.id?h.emit("status:"+i.id,i):h.emit("status",i))}function m(i,s){i.op==="png"?d(i.data,s):s(i)}function v(i,s){if(!r)throw"Cannot process BSON encoded message without BSON header.";var f=new FileReader;f.onload=function(){var c=new Uint8Array(this.result),T=r.deserialize(c);s(T)},f.readAsArrayBuffer(i)}return{onopen:function(s){h.isConnected=!0,h.emit("connection",s)},onclose:function(s){h.isConnected=!1,h.emit("close",s)},onerror:function(s){h.emit("error",s)},onmessage:function(s){if(S)S(s.data,function(T){y(T)});else if(typeof Blob<"u"&&s.data instanceof Blob)v(s.data,function(T){m(T,y)});else if(s.data instanceof ArrayBuffer){var f=n.decode(s.data,o);y(f)}else{var c=JSON.parse(typeof s=="string"?s:s.data);m(c,y)}}}}return Re=a,Re}var ke,_t;function rr(){if(_t)return ke;_t=1;var d=K;function n(o){d(this,o)}return ke=n,ke}var Le,bt;function ne(){if(bt)return Le;bt=1;var d=K;function n(o){d(this,o)}return Le=n,Le}var Me={exports:{}};/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */var xt;function $(){return xt||(xt=1,function(d,n){(function(o){var r=Object.hasOwnProperty,a=Array.isArray?Array.isArray:function(t){return Object.prototype.toString.call(t)==="[object Array]"},h=10,S=typeof process=="object"&&typeof process.nextTick=="function",y=typeof Symbol=="function",m=typeof Reflect=="object",v=typeof setImmediate=="function",i=v?setImmediate:setTimeout,s=y?m&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function f(){this._events={},this._conf&&c.call(this,this._conf)}function c(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==o&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function T(e,t){var u="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(u+=" Event name: "+t+"."),typeof process<"u"&&process.emitWarning){var l=new Error(u);l.name="MaxListenersExceededWarning",l.emitter=this,l.count=e,process.emitWarning(l)}else console.error(u),console.trace&&console.trace()}var O=function(e,t,u){var l=arguments.length;switch(l){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,u];default:for(var p=new Array(l);l--;)p[l]=arguments[l];return p}};function A(e,t){for(var u={},l,p=e.length,g=t?t.length:0,w=0;w<p;w++)l=e[w],u[l]=w<g?t[w]:o;return u}function k(e,t,u){this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0;var l,p;if((u.on||u.off)&&(l=u.on,p=u.off),t.addEventListener?(l=t.addEventListener,p=t.removeEventListener):t.addListener?(l=t.addListener,p=t.removeListener):t.on&&(l=t.on,p=t.off),!l&&!p)throw Error("target does not implement any known event API");if(typeof l!="function")throw TypeError("on method must be a function");if(typeof p!="function")throw TypeError("off method must be a function");this._on=l,this._off=p;var g=e._observers;g?g.push(this):e._observers=[this]}Object.assign(k.prototype,{subscribe:function(e,t,u){var l=this,p=this._target,g=this._emitter,w=this._listeners,x=function(){var _=O.apply(null,arguments),b={data:_,name:t,original:e};if(u){var F=u.call(p,b);F!==!1&&g.emit.apply(g,[b.name].concat(_));return}g.emit.apply(g,[t].concat(_))};if(w[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,g._newListener&&g._removeListener&&!l._onNewListener?(this._onNewListener=function(_){_===t&&w[e]===null&&(w[e]=x,l._on.call(p,e,x))},g.on("newListener",this._onNewListener),this._onRemoveListener=function(_){_===t&&!g.hasListeners(_)&&w[e]&&(w[e]=null,l._off.call(p,e,x))},w[e]=null,g.on("removeListener",this._onRemoveListener)):(w[e]=x,l._on.call(p,e,x))},unsubscribe:function(e){var t=this,u=this._listeners,l=this._emitter,p,g,w=this._off,x=this._target,_;if(e&&typeof e!="string")throw TypeError("event must be a string");function b(){t._onNewListener&&(l.off("newListener",t._onNewListener),l.off("removeListener",t._onRemoveListener),t._onNewListener=null,t._onRemoveListener=null);var F=Y.call(l,t);l._observers.splice(F,1)}if(e){if(p=u[e],!p)return;w.call(x,e,p),delete u[e],--this._listenersCount||b()}else{for(g=s(u),_=g.length;_-- >0;)e=g[_],w.call(x,e,u[e]);this._listeners={},this._listenersCount=0,b()}}});function M(e,t,u,l){var p=Object.assign({},t);if(!e)return p;if(typeof e!="object")throw TypeError("options must be an object");var g=Object.keys(e),w=g.length,x,_,b;function F(D){throw Error('Invalid "'+x+'" option value'+(D?". Reason: "+D:""))}for(var V=0;V<w;V++){if(x=g[V],!l&&!r.call(t,x))throw Error('Unknown "'+x+'" option');_=e[x],_!==o&&(b=u[x],p[x]=b?b(_,F):_)}return p}function U(e,t){return(typeof e!="function"||!e.hasOwnProperty("prototype"))&&t("value must be a constructor"),e}function N(e){var t="value must be type of "+e.join("|"),u=e.length,l=e[0],p=e[1];return u===1?function(g,w){if(typeof g===l)return g;w(t)}:u===2?function(g,w){var x=typeof g;if(x===l||x===p)return g;w(t)}:function(g,w){for(var x=typeof g,_=u;_-- >0;)if(x===e[_])return g;w(t)}}var G=N(["function"]),I=N(["object","function"]);function Q(e,t,u){var l,p,g=0,w,x=new e(function(_,b,F){u=M(u,{timeout:0,overload:!1},{timeout:function(W,J){return W*=1,(typeof W!="number"||W<0||!Number.isFinite(W))&&J("timeout must be a positive number"),W}}),l=!u.overload&&typeof e.prototype.cancel=="function"&&typeof F=="function";function V(){p&&(p=null),g&&(clearTimeout(g),g=0)}var D=function(W){V(),_(W)},B=function(W){V(),b(W)};l?t(D,B,F):(p=[function(W){B(W||Error("canceled"))}],t(D,B,function(W){if(w)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof W!="function")throw TypeError("onCancel callback must be a function");p.push(W)}),w=!0),u.timeout>0&&(g=setTimeout(function(){var W=Error("timeout");W.code="ETIMEDOUT",g=0,x.cancel(W),b(W)},u.timeout))});return l||(x.cancel=function(_){if(p){for(var b=p.length,F=1;F<b;F++)p[F](_);p[0](_),p=null}}),x}function Y(e){var t=this._observers;if(!t)return-1;for(var u=t.length,l=0;l<u;l++)if(t[l]._target===e)return l;return-1}function z(e,t,u,l,p){if(!u)return null;if(l===0){var g=typeof t;if(g==="string"){var w,x,_=0,b=0,F=this.delimiter,V=F.length;if((x=t.indexOf(F))!==-1){w=new Array(5);do w[_++]=t.slice(b,x),b=x+V;while((x=t.indexOf(F,b))!==-1);w[_++]=t.slice(b),t=w,p=_}else t=[t],p=1}else g==="object"?p=t.length:(t=[t],p=1)}var D=null,B,W,J,le,he,ie=t[l],ve=t[l+1],Z,X;if(l===p)u._listeners&&(typeof u._listeners=="function"?(e&&e.push(u._listeners),D=[u]):(e&&e.push.apply(e,u._listeners),D=[u]));else if(ie==="*"){for(Z=s(u),x=Z.length;x-- >0;)B=Z[x],B!=="_listeners"&&(X=z(e,t,u[B],l+1,p),X&&(D?D.push.apply(D,X):D=X));return D}else if(ie==="**"){for(he=l+1===p||l+2===p&&ve==="*",he&&u._listeners&&(D=z(e,t,u,p,p)),Z=s(u),x=Z.length;x-- >0;)B=Z[x],B!=="_listeners"&&(B==="*"||B==="**"?(u[B]._listeners&&!he&&(X=z(e,t,u[B],p,p),X&&(D?D.push.apply(D,X):D=X)),X=z(e,t,u[B],l,p)):B===ve?X=z(e,t,u[B],l+2,p):X=z(e,t,u[B],l,p),X&&(D?D.push.apply(D,X):D=X));return D}else u[ie]&&(D=z(e,t,u[ie],l+1,p));if(W=u["*"],W&&z(e,t,W,l+1,p),J=u["**"],J)if(l<p)for(J._listeners&&z(e,t,J,p,p),Z=s(J),x=Z.length;x-- >0;)B=Z[x],B!=="_listeners"&&(B===ve?z(e,t,J[B],l+2,p):B===ie?z(e,t,J[B],l+1,p):(le={},le[B]=J[B],z(e,t,{"**":le},l+1,p)));else J._listeners?z(e,t,J,p,p):J["*"]&&J["*"]._listeners&&z(e,t,J["*"],p,p);return D}function H(e,t,u){var l=0,p=0,g,w=this.delimiter,x=w.length,_;if(typeof e=="string")if((g=e.indexOf(w))!==-1){_=new Array(5);do _[l++]=e.slice(p,g),p=g+x;while((g=e.indexOf(w,p))!==-1);_[l++]=e.slice(p)}else _=[e],l=1;else _=e,l=e.length;if(l>1){for(g=0;g+1<l;g++)if(_[g]==="**"&&_[g+1]==="**")return}var b=this.listenerTree,F;for(g=0;g<l;g++)if(F=_[g],b=b[F]||(b[F]={}),g===l-1)return b._listeners?(typeof b._listeners=="function"&&(b._listeners=[b._listeners]),u?b._listeners.unshift(t):b._listeners.push(t),!b._listeners.warned&&this._maxListeners>0&&b._listeners.length>this._maxListeners&&(b._listeners.warned=!0,T.call(this,b._listeners.length,F))):b._listeners=t,!0;return!0}function L(e,t,u,l){for(var p=s(e),g=p.length,w,x,_,b=e._listeners,F;g-- >0;)x=p[g],w=e[x],x==="_listeners"?_=u:_=u?u.concat(x):[x],F=l||typeof x=="symbol",b&&t.push(F?_:_.join(this.delimiter)),typeof w=="object"&&L.call(this,w,t,_,F);return t}function q(e){for(var t=s(e),u=t.length,l,p,g;u-- >0;)p=t[u],l=e[p],l&&(g=!0,p!=="_listeners"&&!q(l)&&delete e[p]);return g}function E(e,t,u){this.emitter=e,this.event=t,this.listener=u}E.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function C(e,t,u){if(u===!0)p=!0;else if(u===!1)l=!0;else{if(!u||typeof u!="object")throw TypeError("options should be an object or true");var l=u.async,p=u.promisify,g=u.nextTick,w=u.objectify}if(l||g||p){var x=t,_=t._origin||t;if(g&&!S)throw Error("process.nextTick is not supported");p===o&&(p=t.constructor.name==="AsyncFunction"),t=function(){var b=arguments,F=this,V=this.event;return p?g?Promise.resolve():new Promise(function(D){i(D)}).then(function(){return F.event=V,x.apply(F,b)}):(g?process.nextTick:i)(function(){F.event=V,x.apply(F,b)})},t._async=!0,t._origin=_}return[t,w?new E(this,e,t):this]}function R(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,c.call(this,e)}R.EventEmitter2=R,R.prototype.listenTo=function(e,t,u){if(typeof e!="object")throw TypeError("target musts be an object");var l=this;u=M(u,{on:o,off:o,reducers:o},{on:G,off:G,reducers:I});function p(g){if(typeof g!="object")throw TypeError("events must be an object");var w=u.reducers,x=Y.call(l,e),_;x===-1?_=new k(l,e,u):_=l._observers[x];for(var b=s(g),F=b.length,V,D=typeof w=="function",B=0;B<F;B++)V=b[B],_.subscribe(V,g[V]||V,D?w:w&&w[V])}return a(t)?p(A(t)):p(typeof t=="string"?A(t.split(/\s+/)):t),this},R.prototype.stopListeningTo=function(e,t){var u=this._observers;if(!u)return!1;var l=u.length,p,g=!1;if(e&&typeof e!="object")throw TypeError("target should be an object");for(;l-- >0;)p=u[l],(!e||p._target===e)&&(p.unsubscribe(t),g=!0);return g},R.prototype.delimiter=".",R.prototype.setMaxListeners=function(e){e!==o&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},R.prototype.getMaxListeners=function(){return this._maxListeners},R.prototype.event="",R.prototype.once=function(e,t,u){return this._once(e,t,!1,u)},R.prototype.prependOnceListener=function(e,t,u){return this._once(e,t,!0,u)},R.prototype._once=function(e,t,u,l){return this._many(e,1,t,u,l)},R.prototype.many=function(e,t,u,l){return this._many(e,t,u,!1,l)},R.prototype.prependMany=function(e,t,u,l){return this._many(e,t,u,!0,l)},R.prototype._many=function(e,t,u,l,p){var g=this;if(typeof u!="function")throw new Error("many only accepts instances of Function");function w(){return--t===0&&g.off(e,w),u.apply(this,arguments)}return w._origin=u,this._on(e,w,l,p)},R.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||f.call(this);var e=arguments[0],t,u=this.wildcard,l,p,g,w,x;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(u&&(t=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(p=e.length,y){for(g=0;g<p;g++)if(typeof e[g]=="symbol"){x=!0;break}}x||(e=e.join(this.delimiter))}var _=arguments.length,b;if(this._all&&this._all.length)for(b=this._all.slice(),g=0,p=b.length;g<p;g++)switch(this.event=e,_){case 1:b[g].call(this,e);break;case 2:b[g].call(this,e,arguments[1]);break;case 3:b[g].call(this,e,arguments[1],arguments[2]);break;default:b[g].apply(this,arguments)}if(u)b=[],z.call(this,b,t,this.listenerTree,0,p);else if(b=this._events[e],typeof b=="function"){switch(this.event=e,_){case 1:b.call(this);break;case 2:b.call(this,arguments[1]);break;case 3:b.call(this,arguments[1],arguments[2]);break;default:for(l=new Array(_-1),w=1;w<_;w++)l[w-1]=arguments[w];b.apply(this,l)}return!0}else b&&(b=b.slice());if(b&&b.length){if(_>3)for(l=new Array(_-1),w=1;w<_;w++)l[w-1]=arguments[w];for(g=0,p=b.length;g<p;g++)switch(this.event=e,_){case 1:b[g].call(this);break;case 2:b[g].call(this,arguments[1]);break;case 3:b[g].call(this,arguments[1],arguments[2]);break;default:b[g].apply(this,l)}return!0}else if(!this.ignoreErrors&&!this._all&&e==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},R.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||f.call(this);var e=arguments[0],t=this.wildcard,u,l,p,g,w,x;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(t&&(u=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(g=e.length,y){for(w=0;w<g;w++)if(typeof e[w]=="symbol"){l=!0;break}}l||(e=e.join(this.delimiter))}var _=[],b=arguments.length,F;if(this._all)for(w=0,g=this._all.length;w<g;w++)switch(this.event=e,b){case 1:_.push(this._all[w].call(this,e));break;case 2:_.push(this._all[w].call(this,e,arguments[1]));break;case 3:_.push(this._all[w].call(this,e,arguments[1],arguments[2]));break;default:_.push(this._all[w].apply(this,arguments))}if(t?(F=[],z.call(this,F,u,this.listenerTree,0)):F=this._events[e],typeof F=="function")switch(this.event=e,b){case 1:_.push(F.call(this));break;case 2:_.push(F.call(this,arguments[1]));break;case 3:_.push(F.call(this,arguments[1],arguments[2]));break;default:for(p=new Array(b-1),x=1;x<b;x++)p[x-1]=arguments[x];_.push(F.apply(this,p))}else if(F&&F.length){if(F=F.slice(),b>3)for(p=new Array(b-1),x=1;x<b;x++)p[x-1]=arguments[x];for(w=0,g=F.length;w<g;w++)switch(this.event=e,b){case 1:_.push(F[w].call(this));break;case 2:_.push(F[w].call(this,arguments[1]));break;case 3:_.push(F[w].call(this,arguments[1],arguments[2]));break;default:_.push(F[w].apply(this,p))}}else if(!this.ignoreErrors&&!this._all&&e==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(_)},R.prototype.on=function(e,t,u){return this._on(e,t,!1,u)},R.prototype.prependListener=function(e,t,u){return this._on(e,t,!0,u)},R.prototype.onAny=function(e){return this._onAny(e,!1)},R.prototype.prependAny=function(e){return this._onAny(e,!0)},R.prototype.addListener=R.prototype.on,R.prototype._onAny=function(e,t){if(typeof e!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},R.prototype._on=function(e,t,u,l){if(typeof e=="function")return this._onAny(e,t),this;if(typeof t!="function")throw new Error("on only accepts instances of Function");this._events||f.call(this);var p=this,g;return l!==o&&(g=C.call(this,e,t,l),t=g[0],p=g[1]),this._newListener&&this.emit("newListener",e,t),this.wildcard?(H.call(this,e,t,u),p):(this._events[e]?(typeof this._events[e]=="function"&&(this._events[e]=[this._events[e]]),u?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,T.call(this,this._events[e].length,e))):this._events[e]=t,p)},R.prototype.off=function(e,t){if(typeof t!="function")throw new Error("removeListener only takes instances of Function");var u,l=[];if(this.wildcard){var p=typeof e=="string"?e.split(this.delimiter):e.slice();if(l=z.call(this,null,p,this.listenerTree,0),!l)return this}else{if(!this._events[e])return this;u=this._events[e],l.push({_listeners:u})}for(var g=0;g<l.length;g++){var w=l[g];if(u=w._listeners,a(u)){for(var x=-1,_=0,b=u.length;_<b;_++)if(u[_]===t||u[_].listener&&u[_].listener===t||u[_]._origin&&u[_]._origin===t){x=_;break}if(x<0)continue;return this.wildcard?w._listeners.splice(x,1):this._events[e].splice(x,1),u.length===0&&(this.wildcard?delete w._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}else(u===t||u.listener&&u.listener===t||u._origin&&u._origin===t)&&(this.wildcard?delete w._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&q(this.listenerTree),this},R.prototype.offAny=function(e){var t=0,u=0,l;if(e&&this._all&&this._all.length>0){for(l=this._all,t=0,u=l.length;t<u;t++)if(e===l[t])return l.splice(t,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(l=this._all,this._removeListener)for(t=0,u=l.length;t<u;t++)this.emit("removeListenerAny",l[t]);this._all=[]}return this},R.prototype.removeListener=R.prototype.off,R.prototype.removeAllListeners=function(e){if(e===o)return!this._events||f.call(this),this;if(this.wildcard){var t=z.call(this,null,e,this.listenerTree,0),u,l;if(!t)return this;for(l=0;l<t.length;l++)u=t[l],u._listeners=null;this.listenerTree&&q(this.listenerTree)}else this._events&&(this._events[e]=null);return this},R.prototype.listeners=function(e){var t=this._events,u,l,p,g,w;if(e===o){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!t)return[];for(u=s(t),g=u.length,p=[];g-- >0;)l=t[u[g]],typeof l=="function"?p.push(l):p.push.apply(p,l);return p}else{if(this.wildcard){if(w=this.listenerTree,!w)return[];var x=[],_=typeof e=="string"?e.split(this.delimiter):e.slice();return z.call(this,x,_,w,0),x}return t?(l=t[e],l?typeof l=="function"?[l]:l:[]):[]}},R.prototype.eventNames=function(e){var t=this._events;return this.wildcard?L.call(this,this.listenerTree,[],null,e):t?s(t):[]},R.prototype.listenerCount=function(e){return this.listeners(e).length},R.prototype.hasListeners=function(e){if(this.wildcard){var t=[],u=typeof e=="string"?e.split(this.delimiter):e.slice();return z.call(this,t,u,this.listenerTree,0),t.length>0}var l=this._events,p=this._all;return!!(p&&p.length||l&&(e===o?s(l).length:l[e]))},R.prototype.listenersAny=function(){return this._all?this._all:[]},R.prototype.waitFor=function(e,t){var u=this,l=typeof t;return l==="number"?t={timeout:t}:l==="function"&&(t={filter:t}),t=M(t,{timeout:0,filter:o,handleError:!1,Promise,overload:!1},{filter:G,Promise:U}),Q(t.Promise,function(p,g,w){function x(){var _=t.filter;if(!(_&&!_.apply(u,arguments)))if(u.off(e,x),t.handleError){var b=arguments[0];b?g(b):p(O.apply(null,arguments).slice(1))}else p(O.apply(null,arguments))}w(function(){u.off(e,x)}),u._on(e,x,!1)},{timeout:t.timeout,overload:t.overload})};function P(e,t,u){u=M(u,{Promise,timeout:0,overload:!1},{Promise:U});var l=u.Promise;return Q(l,function(p,g,w){var x;if(typeof e.addEventListener=="function"){x=function(){p(O.apply(null,arguments))},w(function(){e.removeEventListener(t,x)}),e.addEventListener(t,x,{once:!0});return}var _=function(){b&&e.removeListener("error",b),p(O.apply(null,arguments))},b;t!=="error"&&(b=function(F){e.removeListener(t,_),g(F)},e.once("error",b)),w(function(){b&&e.removeListener("error",b),e.removeListener(t,_)}),e.once(t,_)},{timeout:u.timeout,overload:u.overload})}var j=R.prototype;Object.defineProperties(R,{defaultMaxListeners:{get:function(){return j._maxListeners},set:function(e){if(typeof e!="number"||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");j._maxListeners=e},enumerable:!0},once:{value:P,writable:!0,configurable:!0}}),Object.defineProperties(j,{_maxListeners:{value:h,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof o=="function"&&o.amd?o(function(){return R}):d.exports=R})()}(Me)),Me.exports}var Ae,Tt;function fe(){if(Tt)return Ae;Tt=1;var d=rr();ne();var n=$().EventEmitter2;function o(r){r=r||{},this.ros=r.ros,this.name=r.name,this.serviceType=r.serviceType,this.isAdvertised=!1,this._serviceCallback=null}return o.prototype.__proto__=n.prototype,o.prototype.callService=function(r,a,h){if(!this.isAdvertised){var S="call_service:"+this.name+":"+ ++this.ros.idCounter;(a||h)&&this.ros.once(S,function(m){m.result!==void 0&&m.result===!1?typeof h=="function"&&h(m.values):typeof a=="function"&&a(new d(m.values))});var y={op:"call_service",id:S,service:this.name,type:this.serviceType,args:r};this.ros.callOnConnection(y)}},o.prototype.advertise=function(r){this.isAdvertised||typeof r!="function"||(this._serviceCallback=r,this.ros.on(this.name,this._serviceResponse.bind(this)),this.ros.callOnConnection({op:"advertise_service",type:this.serviceType,service:this.name}),this.isAdvertised=!0)},o.prototype.unadvertise=function(){this.isAdvertised&&(this.ros.callOnConnection({op:"unadvertise_service",service:this.name}),this.isAdvertised=!1)},o.prototype._serviceResponse=function(r){var a={},h=this._serviceCallback(r.args,a),S={op:"service_response",service:this.name,values:new d(a),result:h};r.id&&(S.id=r.id),this.ros.callOnConnection(S)},Ae=o,Ae}var Ue,St;function nt(){if(St)return Ue;St=1;var d=tr(),n=br(),o=kr(),r=fe(),a=ne(),h=K,S=$().EventEmitter2;function y(m){m=m||{};var v=this;this.socket=null,this.idCounter=0,this.isConnected=!1,this.transportLibrary=m.transportLibrary||"websocket",this.transportOptions=m.transportOptions||{},this._sendFunc=function(i){v.sendEncodedMessage(i)},typeof m.groovyCompatibility>"u"?this.groovyCompatibility=!0:this.groovyCompatibility=m.groovyCompatibility,this.setMaxListeners(0),m.url&&this.connect(m.url)}return y.prototype.__proto__=S.prototype,y.prototype.connect=function(m){if(this.transportLibrary==="socket.io")this.socket=h(io(m,{"force new connection":!0}),o(this)),this.socket.on("connect",this.socket.onopen),this.socket.on("data",this.socket.onmessage),this.socket.on("close",this.socket.onclose),this.socket.on("error",this.socket.onerror);else if(this.transportLibrary.constructor.name==="RTCPeerConnection")this.socket=h(this.transportLibrary.createDataChannel(m,this.transportOptions),o(this));else if(this.transportLibrary==="websocket"){if(!this.socket||this.socket.readyState===d.CLOSED){var v=new d(m);v.binaryType="arraybuffer",this.socket=h(v,o(this))}}else if(this.transportLibrary==="workersocket")this.socket=h(new n(m),o(this));else throw"Unknown transportLibrary: "+this.transportLibrary.toString()},y.prototype.close=function(){this.socket&&this.socket.close()},y.prototype.authenticate=function(m,v,i,s,f,c,T){var O={op:"auth",mac:m,client:v,dest:i,rand:s,t:f,level:c,end:T};this.callOnConnection(O)},y.prototype.sendEncodedMessage=function(m){var v=null,i=this;this.transportLibrary==="socket.io"?v=function(s){i.socket.emit("operation",s)}:v=function(s){i.socket.send(s)},this.isConnected?v(m):i.once("connection",function(){v(m)})},y.prototype.callOnConnection=function(m){this.transportOptions.encoder?this.transportOptions.encoder(m,this._sendFunc):this._sendFunc(JSON.stringify(m))},y.prototype.setStatusLevel=function(m,v){var i={op:"set_level",level:m,id:v};this.callOnConnection(i)},y.prototype.getActionServers=function(m,v){var i=new r({ros:this,name:"/rosapi/action_servers",serviceType:"rosapi/GetActionServers"}),s=new a({});typeof v=="function"?i.callService(s,function(f){m(f.action_servers)},function(f){v(f)}):i.callService(s,function(f){m(f.action_servers)})},y.prototype.getTopics=function(m,v){var i=new r({ros:this,name:"/rosapi/topics",serviceType:"rosapi/Topics"}),s=new a;typeof v=="function"?i.callService(s,function(f){m(f)},function(f){v(f)}):i.callService(s,function(f){m(f)})},y.prototype.getTopicsForType=function(m,v,i){var s=new r({ros:this,name:"/rosapi/topics_for_type",serviceType:"rosapi/TopicsForType"}),f=new a({type:m});typeof i=="function"?s.callService(f,function(c){v(c.topics)},function(c){i(c)}):s.callService(f,function(c){v(c.topics)})},y.prototype.getServices=function(m,v){var i=new r({ros:this,name:"/rosapi/services",serviceType:"rosapi/Services"}),s=new a;typeof v=="function"?i.callService(s,function(f){m(f.services)},function(f){v(f)}):i.callService(s,function(f){m(f.services)})},y.prototype.getServicesForType=function(m,v,i){var s=new r({ros:this,name:"/rosapi/services_for_type",serviceType:"rosapi/ServicesForType"}),f=new a({type:m});typeof i=="function"?s.callService(f,function(c){v(c.services)},function(c){i(c)}):s.callService(f,function(c){v(c.services)})},y.prototype.getServiceRequestDetails=function(m,v,i){var s=new r({ros:this,name:"/rosapi/service_request_details",serviceType:"rosapi/ServiceRequestDetails"}),f=new a({type:m});typeof i=="function"?s.callService(f,function(c){v(c)},function(c){i(c)}):s.callService(f,function(c){v(c)})},y.prototype.getServiceResponseDetails=function(m,v,i){var s=new r({ros:this,name:"/rosapi/service_response_details",serviceType:"rosapi/ServiceResponseDetails"}),f=new a({type:m});typeof i=="function"?s.callService(f,function(c){v(c)},function(c){i(c)}):s.callService(f,function(c){v(c)})},y.prototype.getNodes=function(m,v){var i=new r({ros:this,name:"/rosapi/nodes",serviceType:"rosapi/Nodes"}),s=new a;typeof v=="function"?i.callService(s,function(f){m(f.nodes)},function(f){v(f)}):i.callService(s,function(f){m(f.nodes)})},y.prototype.getNodeDetails=function(m,v,i){var s=new r({ros:this,name:"/rosapi/node_details",serviceType:"rosapi/NodeDetails"}),f=new a({node:m});typeof i=="function"?s.callService(f,function(c){v(c.subscribing,c.publishing,c.services)},function(c){i(c)}):s.callService(f,function(c){v(c)})},y.prototype.getParams=function(m,v){var i=new r({ros:this,name:"/rosapi/get_param_names",serviceType:"rosapi/GetParamNames"}),s=new a;typeof v=="function"?i.callService(s,function(f){m(f.names)},function(f){v(f)}):i.callService(s,function(f){m(f.names)})},y.prototype.getTopicType=function(m,v,i){var s=new r({ros:this,name:"/rosapi/topic_type",serviceType:"rosapi/TopicType"}),f=new a({topic:m});typeof i=="function"?s.callService(f,function(c){v(c.type)},function(c){i(c)}):s.callService(f,function(c){v(c.type)})},y.prototype.getServiceType=function(m,v,i){var s=new r({ros:this,name:"/rosapi/service_type",serviceType:"rosapi/ServiceType"}),f=new a({service:m});typeof i=="function"?s.callService(f,function(c){v(c.type)},function(c){i(c)}):s.callService(f,function(c){v(c.type)})},y.prototype.getMessageDetails=function(m,v,i){var s=new r({ros:this,name:"/rosapi/message_details",serviceType:"rosapi/MessageDetails"}),f=new a({type:m});typeof i=="function"?s.callService(f,function(c){v(c.typedefs)},function(c){i(c)}):s.callService(f,function(c){v(c.typedefs)})},y.prototype.decodeTypeDefs=function(m){var v=this,i=function(s,f){for(var c={},T=0;T<s.fieldnames.length;T++){var O=s.fieldarraylen[T],A=s.fieldnames[T],k=s.fieldtypes[T];if(k.indexOf("/")===-1)O===-1?c[A]=k:c[A]=[k];else{for(var M=!1,U=0;U<f.length;U++)if(f[U].type.toString()===k.toString()){M=f[U];break}if(M){var N=i(M,f);O===-1||(c[A]=[N])}else v.emit("error","Cannot find "+k+" in decodeTypeDefs")}}return c};return i(m[0],m)},y.prototype.getTopicsAndRawTypes=function(m,v){var i=new r({ros:this,name:"/rosapi/topics_and_raw_types",serviceType:"rosapi/TopicsAndRawTypes"}),s=new a;typeof v=="function"?i.callService(s,function(f){m(f)},function(f){v(f)}):i.callService(s,function(f){m(f)})},Ue=y,Ue}var Ee,Rt;function te(){if(Rt)return Ee;Rt=1;var d=K;function n(o){d(this,o)}return Ee=n,Ee}var Oe,kt;function ae(){if(kt)return Oe;kt=1;var d=$().EventEmitter2,n=te();function o(r){r=r||{},this.ros=r.ros,this.name=r.name,this.messageType=r.messageType,this.isAdvertised=!1,this.compression=r.compression||"none",this.throttle_rate=r.throttle_rate||0,this.latch=r.latch||!1,this.queue_size=r.queue_size||100,this.queue_length=r.queue_length||0,this.reconnect_on_close=r.reconnect_on_close!==void 0?r.reconnect_on_close:!0,this.compression&&this.compression!=="png"&&this.compression!=="cbor"&&this.compression!=="cbor-raw"&&this.compression!=="none"&&(this.emit("warning",this.compression+" compression is not supported. No compression will be used."),this.compression="none"),this.throttle_rate<0&&(this.emit("warning",this.throttle_rate+" is not allowed. Set to 0"),this.throttle_rate=0);var a=this;this.reconnect_on_close?this.callForSubscribeAndAdvertise=function(h){a.ros.callOnConnection(h),a.waitForReconnect=!1,a.reconnectFunc=function(){a.waitForReconnect||(a.waitForReconnect=!0,a.ros.callOnConnection(h),a.ros.once("connection",function(){a.waitForReconnect=!1}))},a.ros.on("close",a.reconnectFunc)}:this.callForSubscribeAndAdvertise=this.ros.callOnConnection,this._messageCallback=function(h){a.emit("message",new n(h))}}return o.prototype.__proto__=d.prototype,o.prototype.subscribe=function(r){typeof r=="function"&&this.on("message",r),!this.subscribeId&&(this.ros.on(this.name,this._messageCallback),this.subscribeId="subscribe:"+this.name+":"+ ++this.ros.idCounter,this.callForSubscribeAndAdvertise({op:"subscribe",id:this.subscribeId,type:this.messageType,topic:this.name,compression:this.compression,throttle_rate:this.throttle_rate,queue_length:this.queue_length}))},o.prototype.unsubscribe=function(r){r&&(this.off("message",r),this.listeners("message").length)||this.subscribeId&&(this.ros.off(this.name,this._messageCallback),this.reconnect_on_close&&this.ros.off("close",this.reconnectFunc),this.emit("unsubscribe"),this.ros.callOnConnection({op:"unsubscribe",id:this.subscribeId,topic:this.name}),this.subscribeId=null)},o.prototype.advertise=function(){if(!this.isAdvertised&&(this.advertiseId="advertise:"+this.name+":"+ ++this.ros.idCounter,this.callForSubscribeAndAdvertise({op:"advertise",id:this.advertiseId,type:this.messageType,topic:this.name,latch:this.latch,queue_size:this.queue_size}),this.isAdvertised=!0,!this.reconnect_on_close)){var r=this;this.ros.on("close",function(){r.isAdvertised=!1})}},o.prototype.unadvertise=function(){this.isAdvertised&&(this.reconnect_on_close&&this.ros.off("close",this.reconnectFunc),this.emit("unadvertise"),this.ros.callOnConnection({op:"unadvertise",id:this.advertiseId,topic:this.name}),this.isAdvertised=!1)},o.prototype.publish=function(r){this.isAdvertised||this.advertise(),this.ros.idCounter++;var a={op:"publish",id:"publish:"+this.name+":"+this.ros.idCounter,topic:this.name,msg:r,latch:this.latch};this.ros.callOnConnection(a)},Oe=o,Oe}var Fe,Lt;function Lr(){if(Lt)return Fe;Lt=1;var d=fe(),n=ne();function o(r){r=r||{},this.ros=r.ros,this.name=r.name}return o.prototype.get=function(r){var a=new d({ros:this.ros,name:"/rosapi/get_param",serviceType:"rosapi/GetParam"}),h=new n({name:this.name});a.callService(h,function(S){var y=JSON.parse(S.value);r(y)})},o.prototype.set=function(r,a){var h=new d({ros:this.ros,name:"/rosapi/set_param",serviceType:"rosapi/SetParam"}),S=new n({name:this.name,value:JSON.stringify(r)});h.callService(S,a)},o.prototype.delete=function(r){var a=new d({ros:this.ros,name:"/rosapi/delete_param",serviceType:"rosapi/DeleteParam"}),h=new n({name:this.name});a.callService(h,r)},Fe=o,Fe}var Mt;function Mr(){if(Mt)return pe.exports;Mt=1;var d=st(),n=pe.exports={Ros:nt(),Topic:ae(),Message:te(),Param:Lr(),Service:fe(),ServiceRequest:ne(),ServiceResponse:rr()};return d(n.Ros,["Param","Service","Topic"],n),pe.exports}var Ce={exports:{}},qe,At;function ir(){if(At)return qe;At=1;var d=ae(),n=te(),o=$().EventEmitter2;function r(a){var h=this;a=a||{},this.ros=a.ros,this.serverName=a.serverName,this.actionName=a.actionName,this.timeout=a.timeout,this.omitFeedback=a.omitFeedback,this.omitStatus=a.omitStatus,this.omitResult=a.omitResult,this.goals={};var S=!1;this.feedbackListener=new d({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),this.statusListener=new d({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"}),this.resultListener=new d({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"}),this.goalTopic=new d({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),this.cancelTopic=new d({ros:this.ros,name:this.serverName+"/cancel",messageType:"actionlib_msgs/GoalID"}),this.goalTopic.advertise(),this.cancelTopic.advertise(),this.omitStatus||this.statusListener.subscribe(function(y){S=!0,y.status_list.forEach(function(m){var v=h.goals[m.goal_id.id];v&&v.emit("status",m)})}),this.omitFeedback||this.feedbackListener.subscribe(function(y){var m=h.goals[y.status.goal_id.id];m&&(m.emit("status",y.status),m.emit("feedback",y.feedback))}),this.omitResult||this.resultListener.subscribe(function(y){var m=h.goals[y.status.goal_id.id];m&&(m.emit("status",y.status),m.emit("result",y.result))}),this.timeout&&setTimeout(function(){S||h.emit("timeout")},this.timeout)}return r.prototype.__proto__=o.prototype,r.prototype.cancel=function(){var a=new n;this.cancelTopic.publish(a)},r.prototype.dispose=function(){this.goalTopic.unadvertise(),this.cancelTopic.unadvertise(),this.omitStatus||this.statusListener.unsubscribe(),this.omitFeedback||this.feedbackListener.unsubscribe(),this.omitResult||this.resultListener.unsubscribe()},qe=r,qe}var Ne,Ut;function Ar(){if(Ut)return Ne;Ut=1;var d=ae();te();var n=$().EventEmitter2;function o(r){var a=this;r=r||{},this.ros=r.ros,this.serverName=r.serverName,this.actionName=r.actionName,this.timeout=r.timeout,this.omitFeedback=r.omitFeedback,this.omitStatus=r.omitStatus,this.omitResult=r.omitResult;var h=new d({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),S=new d({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),y=new d({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"}),m=new d({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"});h.subscribe(function(v){a.emit("goal",v)}),y.subscribe(function(v){v.status_list.forEach(function(i){a.emit("status",i)})}),S.subscribe(function(v){a.emit("status",v.status),a.emit("feedback",v.feedback)}),m.subscribe(function(v){a.emit("status",v.status),a.emit("result",v.result)})}return o.prototype.__proto__=n.prototype,Ne=o,Ne}var Pe,Et;function sr(){if(Et)return Pe;Et=1;var d=te(),n=$().EventEmitter2;function o(r){var a=this;this.actionClient=r.actionClient,this.goalMessage=r.goalMessage,this.isFinished=!1;var h=new Date;this.goalID="goal_"+Math.random()+"_"+h.getTime(),this.goalMessage=new d({goal_id:{stamp:{secs:0,nsecs:0},id:this.goalID},goal:this.goalMessage}),this.on("status",function(S){a.status=S}),this.on("result",function(S){a.isFinished=!0,a.result=S}),this.on("feedback",function(S){a.feedback=S}),this.actionClient.goals[this.goalID]=this}return o.prototype.__proto__=n.prototype,o.prototype.send=function(r){var a=this;a.actionClient.goalTopic.publish(a.goalMessage),r&&setTimeout(function(){a.isFinished||a.emit("timeout")},r)},o.prototype.cancel=function(){var r=new d({id:this.goalID});this.actionClient.cancelTopic.publish(r)},Pe=o,Pe}var je,Ot;function Ur(){if(Ot)return je;Ot=1;var d=ae(),n=te(),o=$().EventEmitter2;function r(a){var h=this;a=a||{},this.ros=a.ros,this.serverName=a.serverName,this.actionName=a.actionName,this.feedbackPublisher=new d({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),this.feedbackPublisher.advertise();var S=new d({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"});S.advertise(),this.resultPublisher=new d({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"}),this.resultPublisher.advertise();var y=new d({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),m=new d({ros:this.ros,name:this.serverName+"/cancel",messageType:"actionlib_msgs/GoalID"});this.statusMessage=new n({header:{stamp:{secs:0,nsecs:100},frame_id:""},status_list:[]}),this.currentGoal=null,this.nextGoal=null,y.subscribe(function(i){h.currentGoal?(h.nextGoal=i,h.emit("cancel")):(h.statusMessage.status_list=[{goal_id:i.goal_id,status:1}],h.currentGoal=i,h.emit("goal",i.goal))});var v=function(i,s){return i.secs>s.secs?!1:i.secs<s.secs?!0:i.nsecs<s.nsecs};m.subscribe(function(i){i.stamp.secs===0&&i.stamp.secs===0&&i.id===""?(h.nextGoal=null,h.currentGoal&&h.emit("cancel")):(h.currentGoal&&i.id===h.currentGoal.goal_id.id?h.emit("cancel"):h.nextGoal&&i.id===h.nextGoal.goal_id.id&&(h.nextGoal=null),h.nextGoal&&v(h.nextGoal.goal_id.stamp,i.stamp)&&(h.nextGoal=null),h.currentGoal&&v(h.currentGoal.goal_id.stamp,i.stamp)&&h.emit("cancel"))}),setInterval(function(){var i=new Date,s=Math.floor(i.getTime()/1e3),f=Math.round(1e9*(i.getTime()/1e3-s));h.statusMessage.header.stamp.secs=s,h.statusMessage.header.stamp.nsecs=f,S.publish(h.statusMessage)},500)}return r.prototype.__proto__=o.prototype,r.prototype.setSucceeded=function(a){var h=new n({status:{goal_id:this.currentGoal.goal_id,status:3},result:a});this.resultPublisher.publish(h),this.statusMessage.status_list=[],this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},r.prototype.setAborted=function(a){var h=new n({status:{goal_id:this.currentGoal.goal_id,status:4},result:a});this.resultPublisher.publish(h),this.statusMessage.status_list=[],this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},r.prototype.sendFeedback=function(a){var h=new n({status:{goal_id:this.currentGoal.goal_id,status:1},feedback:a});this.feedbackPublisher.publish(h)},r.prototype.setPreempted=function(){this.statusMessage.status_list=[];var a=new n({status:{goal_id:this.currentGoal.goal_id,status:2}});this.resultPublisher.publish(a),this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},je=r,je}var Ft;function Er(){if(Ft)return Ce.exports;Ft=1;var d=nt(),n=st(),o=Ce.exports={ActionClient:ir(),ActionListener:Ar(),Goal:sr(),SimpleActionServer:Ur()};return n(d,["ActionClient","SimpleActionServer"],o),Ce.exports}var Ge,Ct;function ee(){if(Ct)return Ge;Ct=1;function d(n){n=n||{},this.x=n.x||0,this.y=n.y||0,this.z=n.z||0}return d.prototype.add=function(n){this.x+=n.x,this.y+=n.y,this.z+=n.z},d.prototype.subtract=function(n){this.x-=n.x,this.y-=n.y,this.z-=n.z},d.prototype.multiplyQuaternion=function(n){var o=n.w*this.x+n.y*this.z-n.z*this.y,r=n.w*this.y+n.z*this.x-n.x*this.z,a=n.w*this.z+n.x*this.y-n.y*this.x,h=-n.x*this.x-n.y*this.y-n.z*this.z;this.x=o*n.w+h*-n.x+r*-n.z-a*-n.y,this.y=r*n.w+h*-n.y+a*-n.x-o*-n.z,this.z=a*n.w+h*-n.z+o*-n.y-r*-n.x},d.prototype.clone=function(){return new d(this)},Ge=d,Ge}var De,qt;function oe(){if(qt)return De;qt=1;function d(n){n=n||{},this.x=n.x||0,this.y=n.y||0,this.z=n.z||0,this.w=typeof n.w=="number"?n.w:1}return d.prototype.conjugate=function(){this.x*=-1,this.y*=-1,this.z*=-1},d.prototype.norm=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},d.prototype.normalize=function(){var n=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);n===0?(this.x=0,this.y=0,this.z=0,this.w=1):(n=1/n,this.x=this.x*n,this.y=this.y*n,this.z=this.z*n,this.w=this.w*n)},d.prototype.invert=function(){this.conjugate(),this.normalize()},d.prototype.multiply=function(n){var o=this.x*n.w+this.y*n.z-this.z*n.y+this.w*n.x,r=-this.x*n.z+this.y*n.w+this.z*n.x+this.w*n.y,a=this.x*n.y-this.y*n.x+this.z*n.w+this.w*n.z,h=-this.x*n.x-this.y*n.y-this.z*n.z+this.w*n.w;this.x=o,this.y=r,this.z=a,this.w=h},d.prototype.clone=function(){return new d(this)},De=d,De}var Be,Nt;function at(){if(Nt)return Be;Nt=1;var d=ee(),n=oe();function o(r){r=r||{},this.position=new d(r.position),this.orientation=new n(r.orientation)}return o.prototype.applyTransform=function(r){this.position.multiplyQuaternion(r.rotation),this.position.add(r.translation);var a=r.rotation.clone();a.multiply(this.orientation),this.orientation=a},o.prototype.clone=function(){return new o(this)},o.prototype.multiply=function(r){var a=r.clone();return a.applyTransform({rotation:this.orientation,translation:this.position}),a},o.prototype.getInverse=function(){var r=this.clone();return r.orientation.invert(),r.position.multiplyQuaternion(r.orientation),r.position.x*=-1,r.position.y*=-1,r.position.z*=-1,r},Be=o,Be}var ze,Pt;function nr(){if(Pt)return ze;Pt=1;var d=ee(),n=oe();function o(r){r=r||{},this.translation=new d(r.translation),this.rotation=new n(r.rotation)}return o.prototype.clone=function(){return new o(this)},ze=o,ze}var Ie,jt;function Or(){return jt||(jt=1,Ie={Pose:at(),Quaternion:oe(),Transform:nr(),Vector3:ee()}),Ie}var We={exports:{}},Ve,Gt;function Fr(){if(Gt)return Ve;Gt=1;var d=ir(),n=sr(),o=fe(),r=ne(),a=ae(),h=nr();function S(y){y=y||{},this.ros=y.ros,this.fixedFrame=y.fixedFrame||"/base_link",this.angularThres=y.angularThres||2,this.transThres=y.transThres||.01,this.rate=y.rate||10,this.updateDelay=y.updateDelay||50;var m=y.topicTimeout||2,v=Math.floor(m),i=Math.floor((m-v)*1e9);this.topicTimeout={secs:v,nsecs:i},this.serverName=y.serverName||"/tf2_web_republisher",this.repubServiceName=y.repubServiceName||"/republish_tfs",this.currentGoal=!1,this.currentTopic=!1,this.frameInfos={},this.republisherUpdateRequested=!1,this._subscribeCB=null,this._isDisposed=!1,this.actionClient=new d({ros:y.ros,serverName:this.serverName,actionName:"tf2_web_republisher/TFSubscriptionAction",omitStatus:!0,omitResult:!0}),this.serviceClient=new o({ros:y.ros,name:this.repubServiceName,serviceType:"tf2_web_republisher/RepublishTFs"})}return S.prototype.processTFArray=function(y){y.transforms.forEach(function(m){var v=m.child_frame_id;v[0]==="/"&&(v=v.substring(1));var i=this.frameInfos[v];i&&(i.transform=new h({translation:m.transform.translation,rotation:m.transform.rotation}),i.cbs.forEach(function(s){s(i.transform)}))},this)},S.prototype.updateGoal=function(){var y={source_frames:Object.keys(this.frameInfos),target_frame:this.fixedFrame,angular_thres:this.angularThres,trans_thres:this.transThres,rate:this.rate};if(this.ros.groovyCompatibility)this.currentGoal&&this.currentGoal.cancel(),this.currentGoal=new n({actionClient:this.actionClient,goalMessage:y}),this.currentGoal.on("feedback",this.processTFArray.bind(this)),this.currentGoal.send();else{y.timeout=this.topicTimeout;var m=new r(y);this.serviceClient.callService(m,this.processResponse.bind(this))}this.republisherUpdateRequested=!1},S.prototype.processResponse=function(y){this._isDisposed||(this.currentTopic&&this.currentTopic.unsubscribe(this._subscribeCB),this.currentTopic=new a({ros:this.ros,name:y.topic_name,messageType:"tf2_web_republisher/TFArray"}),this._subscribeCB=this.processTFArray.bind(this),this.currentTopic.subscribe(this._subscribeCB))},S.prototype.subscribe=function(y,m){y[0]==="/"&&(y=y.substring(1)),this.frameInfos[y]?this.frameInfos[y].transform&&m(this.frameInfos[y].transform):(this.frameInfos[y]={cbs:[]},this.republisherUpdateRequested||(setTimeout(this.updateGoal.bind(this),this.updateDelay),this.republisherUpdateRequested=!0)),this.frameInfos[y].cbs.push(m)},S.prototype.unsubscribe=function(y,m){y[0]==="/"&&(y=y.substring(1));for(var v=this.frameInfos[y],i=v&&v.cbs||[],s=i.length;s--;)i[s]===m&&i.splice(s,1);(!m||i.length===0)&&delete this.frameInfos[y]},S.prototype.dispose=function(){this._isDisposed=!0,this.actionClient.dispose(),this.currentTopic&&this.currentTopic.unsubscribe(this._subscribeCB)},Ve=S,Ve}var Dt;function Cr(){if(Dt)return We.exports;Dt=1;var d=nt(),n=st(),o=We.exports={TFClient:Fr()};return n(d,["TFClient"],o),We.exports}var Je,Bt;function ue(){return Bt||(Bt=1,Je={URDF_SPHERE:0,URDF_BOX:1,URDF_CYLINDER:2,URDF_MESH:3}),Je}var Qe,zt;function ar(){if(zt)return Qe;zt=1;var d=ee(),n=ue();function o(r){this.dimension=null,this.type=n.URDF_BOX;var a=r.xml.getAttribute("size").split(" ");this.dimension=new d({x:parseFloat(a[0]),y:parseFloat(a[1]),z:parseFloat(a[2])})}return Qe=o,Qe}var Xe,It;function or(){if(It)return Xe;It=1;function d(n){var o=n.xml.getAttribute("rgba").split(" ");this.r=parseFloat(o[0]),this.g=parseFloat(o[1]),this.b=parseFloat(o[2]),this.a=parseFloat(o[3])}return Xe=d,Xe}var Ye,Wt;function ur(){if(Wt)return Ye;Wt=1;var d=ue();function n(o){this.type=d.URDF_CYLINDER,this.length=parseFloat(o.xml.getAttribute("length")),this.radius=parseFloat(o.xml.getAttribute("radius"))}return Ye=n,Ye}var He,Vt;function ot(){if(Vt)return He;Vt=1;var d=or();function n(r){this.textureFilename=null,this.color=null,this.name=r.xml.getAttribute("name");var a=r.xml.getElementsByTagName("texture");a.length>0&&(this.textureFilename=a[0].getAttribute("filename"));var h=r.xml.getElementsByTagName("color");h.length>0&&(this.color=new d({xml:h[0]}))}n.prototype.isLink=function(){return this.color===null&&this.textureFilename===null};var o=K;return n.prototype.assign=function(r){return o(this,r)},He=n,He}var Ze,Jt;function cr(){if(Jt)return Ze;Jt=1;var d=ee(),n=ue();function o(r){this.scale=null,this.type=n.URDF_MESH,this.filename=r.xml.getAttribute("filename");var a=r.xml.getAttribute("scale");if(a){var h=a.split(" ");this.scale=new d({x:parseFloat(h[0]),y:parseFloat(h[1]),z:parseFloat(h[2])})}}return Ze=o,Ze}var Ke,Qt;function fr(){if(Qt)return Ke;Qt=1;var d=ue();function n(o){this.type=d.URDF_SPHERE,this.radius=parseFloat(o.xml.getAttribute("radius"))}return Ke=n,Ke}var $e,Xt;function lr(){if(Xt)return $e;Xt=1;var d=at(),n=ee(),o=oe(),r=ur(),a=ar(),h=ot(),S=cr(),y=fr();function m(v){var i=v.xml;this.origin=null,this.geometry=null,this.material=null,this.name=v.xml.getAttribute("name");var s=i.getElementsByTagName("origin");if(s.length===0)this.origin=new d;else{var f=s[0].getAttribute("xyz"),c=new n;f&&(f=f.split(" "),c=new n({x:parseFloat(f[0]),y:parseFloat(f[1]),z:parseFloat(f[2])}));var T=s[0].getAttribute("rpy"),O=new o;if(T){T=T.split(" ");var A=parseFloat(T[0]),k=parseFloat(T[1]),M=parseFloat(T[2]),U=A/2,N=k/2,G=M/2,I=Math.sin(U)*Math.cos(N)*Math.cos(G)-Math.cos(U)*Math.sin(N)*Math.sin(G),Q=Math.cos(U)*Math.sin(N)*Math.cos(G)+Math.sin(U)*Math.cos(N)*Math.sin(G),Y=Math.cos(U)*Math.cos(N)*Math.sin(G)-Math.sin(U)*Math.sin(N)*Math.cos(G),z=Math.cos(U)*Math.cos(N)*Math.cos(G)+Math.sin(U)*Math.sin(N)*Math.sin(G);O=new o({x:I,y:Q,z:Y,w:z}),O.normalize()}this.origin=new d({position:c,orientation:O})}var H=i.getElementsByTagName("geometry");if(H.length>0){for(var L=H[0],q=null,E=0;E<L.childNodes.length;E++){var C=L.childNodes[E];if(C.nodeType===1){q=C;break}}var R=q.nodeName;R==="sphere"?this.geometry=new y({xml:q}):R==="box"?this.geometry=new a({xml:q}):R==="cylinder"?this.geometry=new r({xml:q}):R==="mesh"?this.geometry=new S({xml:q}):console.warn("Unknown geometry type "+R)}var P=i.getElementsByTagName("material");P.length>0&&(this.material=new h({xml:P[0]}))}return $e=m,$e}var et,Yt;function hr(){if(Yt)return et;Yt=1;var d=lr();function n(o){this.name=o.xml.getAttribute("name"),this.visuals=[];for(var r=o.xml.getElementsByTagName("visual"),a=0;a<r.length;a++)this.visuals.push(new d({xml:r[a]}))}return et=n,et}var tt,Ht;function qr(){if(Ht)return tt;Ht=1;var d=at(),n=ee(),o=oe();function r(a){this.name=a.xml.getAttribute("name"),this.type=a.xml.getAttribute("type");var h=a.xml.getElementsByTagName("parent");h.length>0&&(this.parent=h[0].getAttribute("link"));var S=a.xml.getElementsByTagName("child");S.length>0&&(this.child=S[0].getAttribute("link"));var y=a.xml.getElementsByTagName("limit");y.length>0&&(this.minval=parseFloat(y[0].getAttribute("lower")),this.maxval=parseFloat(y[0].getAttribute("upper")));var m=a.xml.getElementsByTagName("origin");if(m.length===0)this.origin=new d;else{var v=m[0].getAttribute("xyz"),i=new n;v&&(v=v.split(" "),i=new n({x:parseFloat(v[0]),y:parseFloat(v[1]),z:parseFloat(v[2])}));var s=m[0].getAttribute("rpy"),f=new o;if(s){s=s.split(" ");var c=parseFloat(s[0]),T=parseFloat(s[1]),O=parseFloat(s[2]),A=c/2,k=T/2,M=O/2,U=Math.sin(A)*Math.cos(k)*Math.cos(M)-Math.cos(A)*Math.sin(k)*Math.sin(M),N=Math.cos(A)*Math.sin(k)*Math.cos(M)+Math.sin(A)*Math.cos(k)*Math.sin(M),G=Math.cos(A)*Math.cos(k)*Math.sin(M)-Math.sin(A)*Math.sin(k)*Math.cos(M),I=Math.cos(A)*Math.cos(k)*Math.cos(M)+Math.sin(A)*Math.sin(k)*Math.sin(M);f=new o({x:U,y:N,z:G,w:I}),f.normalize()}this.origin=new d({position:i,orientation:f})}}return tt=r,tt}var se={},Zt;function Nr(){return Zt||(Zt=1,se.DOMImplementation=window.DOMImplementation,se.XMLSerializer=window.XMLSerializer,se.DOMParser=window.DOMParser),se}var rt,Kt;function Pr(){if(Kt)return rt;Kt=1;var d=ot(),n=hr(),o=qr(),r=Nr().DOMParser;function a(h){h=h||{};var S=h.xml,y=h.string;if(this.materials={},this.links={},this.joints={},y){var m=new r;S=m.parseFromString(y,"text/xml")}var v=S.documentElement;this.name=v.getAttribute("name");for(var i=v.childNodes,s=0;s<i.length;s++){var f=i[s];if(f.tagName==="material"){var c=new d({xml:f});this.materials[c.name]!==void 0?this.materials[c.name].isLink()?this.materials[c.name].assign(c):console.warn("Material "+c.name+"is not unique."):this.materials[c.name]=c}else if(f.tagName==="link"){var T=new n({xml:f});if(this.links[T.name]!==void 0)console.warn("Link "+T.name+" is not unique.");else{for(var O=0;O<T.visuals.length;O++){var A=T.visuals[O].material;A!==null&&A.name&&(this.materials[A.name]!==void 0?T.visuals[O].material=this.materials[A.name]:this.materials[A.name]=A)}this.links[T.name]=T}}else if(f.tagName==="joint"){var k=new o({xml:f});this.joints[k.name]=k}}}return rt=a,rt}var it,$t;function jr(){return $t||($t=1,it=K({UrdfBox:ar(),UrdfColor:or(),UrdfCylinder:ur(),UrdfLink:hr(),UrdfMaterial:ot(),UrdfMesh:cr(),UrdfModel:Pr(),UrdfSphere:fr(),UrdfVisual:lr()},ue())),it}var re=er.ROSLIB||{REVISION:"1.3.0"},ce=K;ce(re,Mr());ce(re,Er());ce(re,Or());ce(re,Cr());ce(re,jr());var Gr=re;const Dr=vr(Gr);export{Dr as R,vr as g};
